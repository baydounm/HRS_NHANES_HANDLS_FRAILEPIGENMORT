{smcl}
{com}{sf}{ul off}{txt}
{com}. 
. //STEP 15: HEATMAP FOR HEI-2010, EPIGENETIC CLOCKS VS. MORTALITY RISK, ADJUSTING AGE, SEX AND RACE: COX MODEL///
. 
. use "E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\SUMMER_STUDENT_2025\HRS_NHANES_HANDLS_FRAILTY_EPICLOCKS_MORT\FINAL_DATA\NHANES\NHANES_MERGED_DATASETfin",clear
{txt}
{com}. 
. stset TIMEyears [pweight=WTDN4YR] , id(seqn) failure(DIED==1)

{txt}Survival-time data settings

{col 12}ID variable: {res}seqn
{col 10}{txt}Failure event: {res}DIED==1
{col 1}{txt}Observed time interval: {res}(TIMEyears[_n-1], TIMEyears]
{col 6}{txt}Exit on or before: {res}failure
{col 17}{txt}Weight: {res}[pweight=WTDN4YR]

{txt}{hline 74}
{res}     21,005{txt}  total observations
{res}          1{txt}  ignored because seqn missing
{res}     10,445{txt}  event time missing (TIMEyears>=.){col 61}PROBABLE ERROR
{res}          1{txt}  observation ends on or before {bf:enter()}
{res}      8,026{txt}  weights invalid {col 61}PROBABLE ERROR
{hline 74}
{res}      2,532{txt}  observations remaining, representing
{res}      2,532{txt}  subjects
{res}      1,361{txt}  failures in single-failure-per-subject data
{res} 35,399.583{txt}  total analysis time at risk and under observation
                                                At risk from t = {res}        0
                                     {txt}Earliest observed entry t = {res}        0
                                          {txt}Last observed exit t = {res}    20.75
{txt}
{com}. 
. 
. * Install estout if not already installed
. ssc install estout, replace
{txt}checking {hilite:estout} consistency and verifying not already installed...
all files already exist and are up to date.

{com}. 
. * Clear any previous estimates
. est clear
{txt}
{com}. 
. * Start the loop
. foreach x of varlist zHorvathAgeEAA zHannumAgeEAA zPhenoAgeEAA zGrimAgeMortEAA zDunedinPoAm  frailty_status  zses {c -(} 
{txt}  2{com}.     
.         * Run the stcox command
.         stcox `x' AGE SEX i.RACE if sample_final==1
{txt}  3{com}.         
.         * Store the estimates
.         eststo output`x'
{txt}  4{com}.     {c )-}

{col 9}{txt}Failure {bf:_d}: {res}DIED==1
{col 3}{txt}Analysis time {bf:_t}: {res}TIMEyears
{col 8}{txt}ID variable: {res}seqn
{col 13}{txt}Weight: {res}[pweight=WTDN4YR]

{txt}(sum of wgt is 40,617,231.784653)
Iteration 0:  Log pseudolikelihood = {res}-4.093e+08
{txt}Iteration 1:  Log pseudolikelihood = {res}-4.018e+08
{txt}Iteration 2:  Log pseudolikelihood = {res}-4.018e+08
{txt}Iteration 3:  Log pseudolikelihood = {res}-4.018e+08
{txt}Iteration 4:  Log pseudolikelihood = {res}-4.018e+08
{txt}Refining estimates:
Iteration 0:  Log pseudolikelihood = {res}-4.018e+08

{txt}Cox regression with Breslow method for ties

No. of subjects = {res}{ralign 11:40,617,232}{col 57}{txt}{lalign 13:Number of obs} = {res}{ralign 6:1,537}
{txt}No. of failures = {res}{ralign 11:23,957,268}
{txt}Time at risk    = {res}{ralign 11:553706396.8}
{col 57}{txt}{lalign 13:Wald chi2({res:6})} = {res}{ralign 6:306.84}
{txt}Log pseudolikelihood = {res}-4.018e+08{col 57}{txt}{lalign 13:Prob > chi2} = {res}{ralign 6:0.0000}

{txt}{ralign 80:(Std. err. adjusted for {res:1,537} clusters in {res:seqn})}
{hline 15}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 16}{c |}{col 28}    Robust
{col 1}            _t{col 16}{c |} Haz. ratio{col 28}   std. err.{col 40}      z{col 48}   P>|z|{col 56}     [95% con{col 69}f. interval]
{hline 15}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
zHorvathAgeEAA {c |}{col 16}{res}{space 2} 1.123183{col 28}{space 2} .0544199{col 39}{space 1}    2.40{col 48}{space 3}0.017{col 56}{space 4}  1.02143{col 69}{space 3} 1.235073
{txt}{space 11}AGE {c |}{col 16}{res}{space 2} 1.102887{col 28}{space 2} .0064182{col 39}{space 1}   16.83{col 48}{space 3}0.000{col 56}{space 4} 1.090378{col 69}{space 3} 1.115538
{txt}{space 11}SEX {c |}{col 16}{res}{space 2} .6851865{col 28}{space 2}  .061184{col 39}{space 1}   -4.23{col 48}{space 3}0.000{col 56}{space 4} .5751756{col 69}{space 3} .8162387
{txt}{space 14} {c |}
{space 10}RACE {c |}
{space 12}1  {c |}{col 16}{res}{space 2} 1.264831{col 28}{space 2} .1258153{col 39}{space 1}    2.36{col 48}{space 3}0.018{col 56}{space 4} 1.040787{col 69}{space 3} 1.537104
{txt}{space 12}2  {c |}{col 16}{res}{space 2} .9365003{col 28}{space 2}  .115476{col 39}{space 1}   -0.53{col 48}{space 3}0.595{col 56}{space 4} .7354443{col 69}{space 3} 1.192521
{txt}{space 12}3  {c |}{col 16}{res}{space 2}  .820355{col 28}{space 2} .1806498{col 39}{space 1}   -0.90{col 48}{space 3}0.369{col 56}{space 4}  .532794{col 69}{space 3} 1.263119
{txt}{hline 15}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}

{col 9}Failure {bf:_d}: {res}DIED==1
{col 3}{txt}Analysis time {bf:_t}: {res}TIMEyears
{col 8}{txt}ID variable: {res}seqn
{col 13}{txt}Weight: {res}[pweight=WTDN4YR]

{txt}(sum of wgt is 40,617,231.784653)
Iteration 0:  Log pseudolikelihood = {res}-4.093e+08
{txt}Iteration 1:  Log pseudolikelihood = {res}-4.015e+08
{txt}Iteration 2:  Log pseudolikelihood = {res}-4.014e+08
{txt}Iteration 3:  Log pseudolikelihood = {res}-4.014e+08
{txt}Iteration 4:  Log pseudolikelihood = {res}-4.014e+08
{txt}Refining estimates:
Iteration 0:  Log pseudolikelihood = {res}-4.014e+08

{txt}Cox regression with Breslow method for ties

No. of subjects = {res}{ralign 11:40,617,232}{col 57}{txt}{lalign 13:Number of obs} = {res}{ralign 6:1,537}
{txt}No. of failures = {res}{ralign 11:23,957,268}
{txt}Time at risk    = {res}{ralign 11:553706396.8}
{col 57}{txt}{lalign 13:Wald chi2({res:6})} = {res}{ralign 6:335.25}
{txt}Log pseudolikelihood = {res}-4.014e+08{col 57}{txt}{lalign 13:Prob > chi2} = {res}{ralign 6:0.0000}

{txt}{ralign 79:(Std. err. adjusted for {res:1,537} clusters in {res:seqn})}
{hline 14}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 15}{c |}{col 27}    Robust
{col 1}           _t{col 15}{c |} Haz. ratio{col 27}   std. err.{col 39}      z{col 47}   P>|z|{col 55}     [95% con{col 68}f. interval]
{hline 14}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
zHannumAgeEAA {c |}{col 15}{res}{space 2} 1.251065{col 27}{space 2} .0626008{col 38}{space 1}    4.48{col 47}{space 3}0.000{col 55}{space 4} 1.134194{col 68}{space 3} 1.379979
{txt}{space 10}AGE {c |}{col 15}{res}{space 2} 1.102155{col 27}{space 2} .0064239{col 38}{space 1}   16.69{col 47}{space 3}0.000{col 55}{space 4} 1.089636{col 68}{space 3} 1.114818
{txt}{space 10}SEX {c |}{col 15}{res}{space 2} .7262651{col 27}{space 2} .0660982{col 38}{space 1}   -3.51{col 47}{space 3}0.000{col 55}{space 4}  .607612{col 68}{space 3} .8680886
{txt}{space 13} {c |}
{space 9}RACE {c |}
{space 11}1  {c |}{col 15}{res}{space 2} 1.350171{col 27}{space 2} .1377601{col 38}{space 1}    2.94{col 47}{space 3}0.003{col 55}{space 4} 1.105451{col 68}{space 3} 1.649067
{txt}{space 11}2  {c |}{col 15}{res}{space 2} .8911904{col 27}{space 2} .1097538{col 38}{space 1}   -0.94{col 47}{space 3}0.350{col 55}{space 4}   .70007{col 68}{space 3} 1.134487
{txt}{space 11}3  {c |}{col 15}{res}{space 2} .7774696{col 27}{space 2} .1656189{col 38}{space 1}   -1.18{col 47}{space 3}0.237{col 55}{space 4} .5121036{col 68}{space 3} 1.180345
{txt}{hline 14}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}

{col 9}Failure {bf:_d}: {res}DIED==1
{col 3}{txt}Analysis time {bf:_t}: {res}TIMEyears
{col 8}{txt}ID variable: {res}seqn
{col 13}{txt}Weight: {res}[pweight=WTDN4YR]

{txt}(sum of wgt is 40,617,231.784653)
Iteration 0:  Log pseudolikelihood = {res}-4.093e+08
{txt}Iteration 1:  Log pseudolikelihood = {res}-4.012e+08
{txt}Iteration 2:  Log pseudolikelihood = {res}-4.012e+08
{txt}Iteration 3:  Log pseudolikelihood = {res}-4.012e+08
{txt}Iteration 4:  Log pseudolikelihood = {res}-4.012e+08
{txt}Refining estimates:
Iteration 0:  Log pseudolikelihood = {res}-4.012e+08

{txt}Cox regression with Breslow method for ties

No. of subjects = {res}{ralign 11:40,617,232}{col 57}{txt}{lalign 13:Number of obs} = {res}{ralign 6:1,537}
{txt}No. of failures = {res}{ralign 11:23,957,268}
{txt}Time at risk    = {res}{ralign 11:553706396.8}
{col 57}{txt}{lalign 13:Wald chi2({res:6})} = {res}{ralign 6:357.54}
{txt}Log pseudolikelihood = {res}-4.012e+08{col 57}{txt}{lalign 13:Prob > chi2} = {res}{ralign 6:0.0000}

{txt}{ralign 78:(Std. err. adjusted for {res:1,537} clusters in {res:seqn})}
{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26}    Robust
{col 1}          _t{col 14}{c |} Haz. ratio{col 26}   std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
zPhenoAgeEAA {c |}{col 14}{res}{space 2} 1.329525{col 26}{space 2} .0668402{col 37}{space 1}    5.67{col 46}{space 3}0.000{col 54}{space 4} 1.204768{col 67}{space 3} 1.467201
{txt}{space 9}AGE {c |}{col 14}{res}{space 2} 1.102711{col 26}{space 2} .0062434{col 37}{space 1}   17.27{col 46}{space 3}0.000{col 54}{space 4} 1.090542{col 67}{space 3} 1.115016
{txt}{space 9}SEX {c |}{col 14}{res}{space 2} .6835958{col 26}{space 2} .0600438{col 37}{space 1}   -4.33{col 46}{space 3}0.000{col 54}{space 4} .5754849{col 67}{space 3} .8120165
{txt}{space 12} {c |}
{space 8}RACE {c |}
{space 10}1  {c |}{col 14}{res}{space 2} 1.263788{col 26}{space 2} .1265281{col 37}{space 1}    2.34{col 46}{space 3}0.019{col 54}{space 4} 1.038613{col 67}{space 3} 1.537783
{txt}{space 10}2  {c |}{col 14}{res}{space 2}  .897903{col 26}{space 2} .1078667{col 37}{space 1}   -0.90{col 46}{space 3}0.370{col 54}{space 4} .7095337{col 67}{space 3} 1.136281
{txt}{space 10}3  {c |}{col 14}{res}{space 2} .8180018{col 26}{space 2} .1780264{col 37}{space 1}   -0.92{col 46}{space 3}0.356{col 54}{space 4} .5339522{col 67}{space 3} 1.253159
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}

{col 9}Failure {bf:_d}: {res}DIED==1
{col 3}{txt}Analysis time {bf:_t}: {res}TIMEyears
{col 8}{txt}ID variable: {res}seqn
{col 13}{txt}Weight: {res}[pweight=WTDN4YR]

{txt}(sum of wgt is 40,617,231.784653)
Iteration 0:  Log pseudolikelihood = {res}-4.093e+08
{txt}Iteration 1:  Log pseudolikelihood = {res}-3.994e+08
{txt}Iteration 2:  Log pseudolikelihood = {res}-3.994e+08
{txt}Iteration 3:  Log pseudolikelihood = {res}-3.994e+08
{txt}Refining estimates:
Iteration 0:  Log pseudolikelihood = {res}-3.994e+08

{txt}Cox regression with Breslow method for ties

No. of subjects = {res}{ralign 11:40,617,232}{col 57}{txt}{lalign 13:Number of obs} = {res}{ralign 6:1,537}
{txt}No. of failures = {res}{ralign 11:23,957,268}
{txt}Time at risk    = {res}{ralign 11:553706396.8}
{col 57}{txt}{lalign 13:Wald chi2({res:6})} = {res}{ralign 6:395.25}
{txt}Log pseudolikelihood = {res}-3.994e+08{col 57}{txt}{lalign 13:Prob > chi2} = {res}{ralign 6:0.0000}

{txt}{ralign 81:(Std. err. adjusted for {res:1,537} clusters in {res:seqn})}
{hline 16}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 17}{c |}{col 29}    Robust
{col 1}             _t{col 17}{c |} Haz. ratio{col 29}   std. err.{col 41}      z{col 49}   P>|z|{col 57}     [95% con{col 70}f. interval]
{hline 16}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
zGrimAgeMortEAA {c |}{col 17}{res}{space 2} 1.700109{col 29}{space 2} .0849448{col 40}{space 1}   10.62{col 49}{space 3}0.000{col 57}{space 4} 1.541513{col 70}{space 3} 1.875023
{txt}{space 12}AGE {c |}{col 17}{res}{space 2} 1.107667{col 29}{space 2} .0064432{col 40}{space 1}   17.58{col 49}{space 3}0.000{col 57}{space 4}  1.09511{col 70}{space 3} 1.120368
{txt}{space 12}SEX {c |}{col 17}{res}{space 2} .9345481{col 29}{space 2} .0896992{col 40}{space 1}   -0.71{col 49}{space 3}0.481{col 57}{space 4} .7742874{col 70}{space 3} 1.127979
{txt}{space 15} {c |}
{space 11}RACE {c |}
{space 13}1  {c |}{col 17}{res}{space 2} 1.082137{col 29}{space 2} .1087916{col 40}{space 1}    0.79{col 49}{space 3}0.432{col 57}{space 4} .8886022{col 70}{space 3} 1.317823
{txt}{space 13}2  {c |}{col 17}{res}{space 2} .8690149{col 29}{space 2} .1098338{col 40}{space 1}   -1.11{col 49}{space 3}0.267{col 57}{space 4}  .678336{col 70}{space 3} 1.113293
{txt}{space 13}3  {c |}{col 17}{res}{space 2} .8116957{col 29}{space 2} .1829871{col 40}{space 1}   -0.93{col 49}{space 3}0.355{col 57}{space 4} .5217952{col 70}{space 3}  1.26266
{txt}{hline 16}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}

{col 9}Failure {bf:_d}: {res}DIED==1
{col 3}{txt}Analysis time {bf:_t}: {res}TIMEyears
{col 8}{txt}ID variable: {res}seqn
{col 13}{txt}Weight: {res}[pweight=WTDN4YR]

{txt}(sum of wgt is 40,617,231.784653)
Iteration 0:  Log pseudolikelihood = {res}-4.093e+08
{txt}Iteration 1:  Log pseudolikelihood = {res}-4.006e+08
{txt}Iteration 2:  Log pseudolikelihood = {res}-4.006e+08
{txt}Iteration 3:  Log pseudolikelihood = {res}-4.006e+08
{txt}Refining estimates:
Iteration 0:  Log pseudolikelihood = {res}-4.006e+08

{txt}Cox regression with Breslow method for ties

No. of subjects = {res}{ralign 11:40,617,232}{col 57}{txt}{lalign 13:Number of obs} = {res}{ralign 6:1,537}
{txt}No. of failures = {res}{ralign 11:23,957,268}
{txt}Time at risk    = {res}{ralign 11:553706396.8}
{col 57}{txt}{lalign 13:Wald chi2({res:6})} = {res}{ralign 6:343.55}
{txt}Log pseudolikelihood = {res}-4.006e+08{col 57}{txt}{lalign 13:Prob > chi2} = {res}{ralign 6:0.0000}

{txt}{ralign 78:(Std. err. adjusted for {res:1,537} clusters in {res:seqn})}
{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26}    Robust
{col 1}          _t{col 14}{c |} Haz. ratio{col 26}   std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
zDunedinPoAm {c |}{col 14}{res}{space 2} 1.404255{col 26}{space 2}   .06428{col 37}{space 1}    7.42{col 46}{space 3}0.000{col 54}{space 4} 1.283755{col 67}{space 3} 1.536066
{txt}{space 9}AGE {c |}{col 14}{res}{space 2} 1.101423{col 26}{space 2} .0064213{col 37}{space 1}   16.57{col 46}{space 3}0.000{col 54}{space 4} 1.088909{col 67}{space 3}  1.11408
{txt}{space 9}SEX {c |}{col 14}{res}{space 2} .7180127{col 26}{space 2} .0645711{col 37}{space 1}   -3.68{col 46}{space 3}0.000{col 54}{space 4} .6019817{col 67}{space 3} .8564085
{txt}{space 12} {c |}
{space 8}RACE {c |}
{space 10}1  {c |}{col 14}{res}{space 2} 1.147237{col 26}{space 2} .1136794{col 37}{space 1}    1.39{col 46}{space 3}0.166{col 54}{space 4} .9447303{col 67}{space 3} 1.393152
{txt}{space 10}2  {c |}{col 14}{res}{space 2} .8728114{col 26}{space 2} .1071858{col 37}{space 1}   -1.11{col 46}{space 3}0.268{col 54}{space 4} .6861016{col 67}{space 3} 1.110331
{txt}{space 10}3  {c |}{col 14}{res}{space 2} .7826013{col 26}{space 2} .1650403{col 37}{space 1}   -1.16{col 46}{space 3}0.245{col 54}{space 4} .5176467{col 67}{space 3} 1.183172
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}

{col 9}Failure {bf:_d}: {res}DIED==1
{col 3}{txt}Analysis time {bf:_t}: {res}TIMEyears
{col 8}{txt}ID variable: {res}seqn
{col 13}{txt}Weight: {res}[pweight=WTDN4YR]

{txt}(sum of wgt is 40,617,231.784653)
Iteration 0:  Log pseudolikelihood = {res}-4.093e+08
{txt}Iteration 1:  Log pseudolikelihood = {res}-4.010e+08
{txt}Iteration 2:  Log pseudolikelihood = {res}-4.009e+08
{txt}Iteration 3:  Log pseudolikelihood = {res}-4.009e+08
{txt}Iteration 4:  Log pseudolikelihood = {res}-4.009e+08
{txt}Refining estimates:
Iteration 0:  Log pseudolikelihood = {res}-4.009e+08

{txt}Cox regression with Breslow method for ties

No. of subjects = {res}{ralign 11:40,617,232}{col 57}{txt}{lalign 13:Number of obs} = {res}{ralign 6:1,537}
{txt}No. of failures = {res}{ralign 11:23,957,268}
{txt}Time at risk    = {res}{ralign 11:553706396.8}
{col 57}{txt}{lalign 13:Wald chi2({res:6})} = {res}{ralign 6:351.25}
{txt}Log pseudolikelihood = {res}-4.009e+08{col 57}{txt}{lalign 13:Prob > chi2} = {res}{ralign 6:0.0000}

{txt}{ralign 80:(Std. err. adjusted for {res:1,537} clusters in {res:seqn})}
{hline 15}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 16}{c |}{col 28}    Robust
{col 1}            _t{col 16}{c |} Haz. ratio{col 28}   std. err.{col 40}      z{col 48}   P>|z|{col 56}     [95% con{col 69}f. interval]
{hline 15}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
frailty_status {c |}{col 16}{res}{space 2} 1.988069{col 28}{space 2} .2095494{col 39}{space 1}    6.52{col 48}{space 3}0.000{col 56}{space 4} 1.617007{col 69}{space 3} 2.444281
{txt}{space 11}AGE {c |}{col 16}{res}{space 2} 1.102623{col 28}{space 2} .0063437{col 39}{space 1}   16.98{col 48}{space 3}0.000{col 56}{space 4}  1.09026{col 69}{space 3} 1.115127
{txt}{space 11}SEX {c |}{col 16}{res}{space 2} .5786297{col 28}{space 2} .0522829{col 39}{space 1}   -6.05{col 48}{space 3}0.000{col 56}{space 4} .4847182{col 69}{space 3} .6907361
{txt}{space 14} {c |}
{space 10}RACE {c |}
{space 12}1  {c |}{col 16}{res}{space 2} 1.172093{col 28}{space 2} .1245124{col 39}{space 1}    1.49{col 48}{space 3}0.135{col 56}{space 4} .9517833{col 69}{space 3} 1.443397
{txt}{space 12}2  {c |}{col 16}{res}{space 2} .8686417{col 28}{space 2} .1123276{col 39}{space 1}   -1.09{col 48}{space 3}0.276{col 56}{space 4} .6741683{col 69}{space 3} 1.119214
{txt}{space 12}3  {c |}{col 16}{res}{space 2} .8325176{col 28}{space 2} .1750815{col 39}{space 1}   -0.87{col 48}{space 3}0.383{col 56}{space 4} .5512932{col 69}{space 3} 1.257199
{txt}{hline 15}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}

{col 9}Failure {bf:_d}: {res}DIED==1
{col 3}{txt}Analysis time {bf:_t}: {res}TIMEyears
{col 8}{txt}ID variable: {res}seqn
{col 13}{txt}Weight: {res}[pweight=WTDN4YR]

{txt}(sum of wgt is 40,617,231.784653)
Iteration 0:  Log pseudolikelihood = {res}-4.093e+08
{txt}Iteration 1:  Log pseudolikelihood = {res}-4.010e+08
{txt}Iteration 2:  Log pseudolikelihood = {res}-4.010e+08
{txt}Iteration 3:  Log pseudolikelihood = {res}-4.010e+08
{txt}Iteration 4:  Log pseudolikelihood = {res}-4.010e+08
{txt}Refining estimates:
Iteration 0:  Log pseudolikelihood = {res}-4.010e+08

{txt}Cox regression with Breslow method for ties

No. of subjects = {res}{ralign 11:40,617,232}{col 57}{txt}{lalign 13:Number of obs} = {res}{ralign 6:1,537}
{txt}No. of failures = {res}{ralign 11:23,957,268}
{txt}Time at risk    = {res}{ralign 11:553706396.8}
{col 57}{txt}{lalign 13:Wald chi2({res:6})} = {res}{ralign 6:355.98}
{txt}Log pseudolikelihood = {res}-4.010e+08{col 57}{txt}{lalign 13:Prob > chi2} = {res}{ralign 6:0.0000}

{txt}{ralign 78:(Std. err. adjusted for {res:1,537} clusters in {res:seqn})}
{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26}    Robust
{col 1}          _t{col 14}{c |} Haz. ratio{col 26}   std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 8}zses {c |}{col 14}{res}{space 2} .7214505{col 26}{space 2} .0374131{col 37}{space 1}   -6.30{col 46}{space 3}0.000{col 54}{space 4} .6517256{col 67}{space 3}  .798635
{txt}{space 9}AGE {c |}{col 14}{res}{space 2} 1.096466{col 26}{space 2} .0064061{col 37}{space 1}   15.76{col 46}{space 3}0.000{col 54}{space 4} 1.083982{col 67}{space 3} 1.109094
{txt}{space 9}SEX {c |}{col 14}{res}{space 2} .5861802{col 26}{space 2} .0530375{col 37}{space 1}   -5.90{col 46}{space 3}0.000{col 54}{space 4} .4909243{col 67}{space 3} .6999189
{txt}{space 12} {c |}
{space 8}RACE {c |}
{space 10}1  {c |}{col 14}{res}{space 2} .9947476{col 26}{space 2} .1062482{col 37}{space 1}   -0.05{col 46}{space 3}0.961{col 54}{space 4} .8068574{col 67}{space 3} 1.226391
{txt}{space 10}2  {c |}{col 14}{res}{space 2} .6254565{col 26}{space 2}  .089687{col 37}{space 1}   -3.27{col 46}{space 3}0.001{col 54}{space 4} .4722148{col 67}{space 3} .8284278
{txt}{space 10}3  {c |}{col 14}{res}{space 2} .6923561{col 26}{space 2} .1703386{col 37}{space 1}   -1.49{col 46}{space 3}0.135{col 54}{space 4} .4274749{col 67}{space 3} 1.121369
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}

{com}. 
. 
. 
. * Export the results to a dataset
. esttab using "E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\SUMMER_STUDENT_2025\HRS_NHANES_HANDLS_FRAILTY_EPICLOCKS_MORT\FINAL_DATA\NHANES\results_TABLE5.csv", replace se ar2
{res}{txt}(output written to {browse  `"E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\SUMMER_STUDENT_2025\HRS_NHANES_HANDLS_FRAILTY_EPICLOCKS_MORT\FINAL_DATA\NHANES\results_TABLE5.csv"'})

{com}. 
. capture import delimited "E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\SUMMER_STUDENT_2025\HRS_NHANES_HANDLS_FRAILTY_EPICLOCKS_MORT\FINAL_DATA\NHANES\results_TABLE5.csv", clear
{txt}
{com}. 
. 
. * Convert the CSV file to a Stata dataset (if needed)
. save "E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\SUMMER_STUDENT_2025\HRS_NHANES_HANDLS_FRAILTY_EPICLOCKS_MORT\FINAL_DATA\NHANES\results_TABLE5.dta",replace
{txt}{p 0 4 2}
file {bf}
E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\SUMMER_STUDENT_2025\HRS_NHANES_HANDLS_FRAILTY_EPICLOCKS_MORT\FINAL_DATA\NHANES\results_TABLE5.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. **Fix the dataset so it is simpler. This is saved as : cleaned_results_TABLE5_final.csv in the same folder**
. 
. use "E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\SUMMER_STUDENT_2025\HRS_NHANES_HANDLS_FRAILTY_EPICLOCKS_MORT\FINAL_DATA\NHANES\NHANES_MERGED_DATASETfin",clear
{txt}
{com}. 
. save "E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\SUMMER_STUDENT_2025\HRS_NHANES_HANDLS_FRAILTY_EPICLOCKS_MORT\FINAL_DATA\NHANES\NHANES_MERGED_DATASETfin",replace
{txt}{p 0 4 2}
file {bf}
E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\SUMMER_STUDENT_2025\HRS_NHANES_HANDLS_FRAILTY_EPICLOCKS_MORT\FINAL_DATA\NHANES\NHANES_MERGED_DATASETfin.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. **STEP 17: FIGURE 3: ERROR BARS FOR COX MODELS**
. 
. **# Load necessary library
. **library(ggplot2)
. 
. **# Read the dataset
. **data <- read.csv("E:/16GBBACKUPUSB/BACKUP_USB_SEPTEMBER2014/SUMMER_STUDENT_2025/HRS_NHANES_HANDLS_FRAILTY_EPICLOCKS_MORT/FINAL_DATA/NHANES/cleaned_results_TABLE5_MODEL1.csv")
. 
. **# Rename columns for clarity
. **colnames(data) <- c("Variable", "LnHR", "SE")
. 
. **# Calculate upper and lower bounds for error bars
. **data$Upper <- data$LnHR + 1.96 * data$SE
. **data$Lower <- data$LnHR - 1.96 * data$SE
. 
. **# Plot with error bars
. **ggplot(data, aes(x = Variable, y = LnHR)) +
. **  geom_point(size = 3, color = "blue") +
. **  geom_errorbar(aes(ymin = Lower, ymax = Upper), width = 0.2, color = "red") +
. **  theme_minimal() +
. **  theme(axis.text.x = element_text(angle = 45, hjust = 1)) +
. **  labs(title = "Log Hazard Ratios with Error Bars",
. **       x = "Variable",
. **       y = "Log Hazard Ratio (LnHR)")
. 
. 
. 
. 
. capture log close
{smcl}
{com}{sf}{ul off}